apiVersion: policy.open-cluster-management.io/v1
kind: PolicyGenerator
metadata:
  name: compliance-operator-cis-stg
policyDefaults:
  namespace: policies               # namespace en el hub para las Policies
  remediationAction: inform         # luego se puede cambiar a enforce
  placement:
    labelSelector:                  # clusters que recibir√°n estas policies
      matchExpressions:
        - key: environment
          operator: In
          values:
            - local-cluster                  # solo clusters con label environment=stg
policies:
  - name: install-compliance-operator
    disabled: false
    manifests:
      - path: compliance-operator/install

  - name: run-cis-scan
    disabled: false
    manifests:
      - path: compliance-operator/profiles/cis

